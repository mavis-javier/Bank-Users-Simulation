CREATE DATABASE bankSim;
USE bankSim

CREATE TABLE Super_User
(
  S_userID INT NOT NULL,
  PRIMARY KEY (S_userID)
);

CREATE TABLE Audit
(
  Agency_Name VARCHAR(255) NOT NULL,
  S_userID INT NOT NULL,
  PRIMARY KEY (S_userID),
  FOREIGN KEY (S_userID) REFERENCES Super_User(S_userID)
);

CREATE TABLE Bank_mgr
(
  branch_id INT NOT NULL,
  S_userID INT NOT NULL,
  PRIMARY KEY (S_userID),
  FOREIGN KEY (S_userID) REFERENCES Super_User(S_userID)
);

CREATE TABLE Account
(
  Account_ID INT NOT NULL,
  Balance INT NOT NULL,
  PRIMARY KEY (Account_ID)
);

CREATE TABLE Savings
(
  Minimum_balance INT NOT NULL,
  Savings_Account_ID INT NOT NULL,
  PRIMARY KEY (Savings_Account_ID),
  FOREIGN KEY (Savings_Account_ID) REFERENCES Account(Account_ID)
);

CREATE TABLE Checking
(
  Overdraft_limit INT NOT NULL,
  Checking_Account_ID INT NOT NULL,
  PRIMARY KEY (Checking_Account_ID),
  FOREIGN KEY (Checking_Account_ID) REFERENCES Account(Account_ID)
);

CREATE TABLE Customer
(
  USERNAME VARCHAR(255) NOT NULL,
  PASSWORD VARCHAR(255) NOT NULL,
  FirstName VARCHAR(255) NOT NULL,
  LastName VARCHAR(255) NOT NULL,
  Phone_Number INT NOT NULL,
  Email VARCHAR(255) NOT NULL,
  Social_Security INT NOT NULL,
  Date_of_Birth INT NOT NULL,
  Checking_Account_ID INT,
  Savings_Account_ID INT,
  PRIMARY KEY (USERNAME),
  FOREIGN KEY (Checking_Account_ID) REFERENCES Checking(Checking_Account_ID),
  FOREIGN KEY (Savings_Account_ID) REFERENCES Savings(Savings_Account_ID),
  UNIQUE (USERNAME)
);

CREATE TABLE Receipt
(
  Transaction_Number INT NOT NULL,
  USERNAME VARCHAR(255) NOT NULL,
  Previous_balance INT NOT NULL,
  transaction_amount INT NOT NULL,
  New_balance INT NOT NULL,
  PRIMARY KEY (Transaction_Number),
  FOREIGN KEY (USERNAME) REFERENCES Customer(USERNAME)
);

CREATE TABLE Bank
(
  Name VARCHAR(255),
  Bank_code INT NOT NULL,
  head_qtr_addr VARCHAR(255),
  S_userID INT,
  PRIMARY KEY (Bank_code),
  FOREIGN KEY (S_userID) REFERENCES Bank_mgr(S_userID)
);

INSERT INTO Customer
VALUES ('test', 'test', 'test', 'test', 1111111111, 'test', 111111111, 11111111, NULL, NULL);
